#versal_cluster map file

# provider: aws
#  image: ami-7e2da54e
#  size: Micro Instance
#  script: Ubuntu

base_ubuntu_aws_tomcat:
{% for x,y,z in [
                [1,'ec2-54-245-225-243.us-west-2.compute.amazonaws.com','tomcat1-play.vrsl.net'],
                [2,'','']
              ]: %}
  - tomcat{{ x }}.vrsl.net
  {% if y is not '' }
  - eip_cname: {{ y }}{%}
  {% if z is not '' }
    - dns: {{ z }}{%}

{% endfor %}

# BEGIN JINJA!!!!
  - tomcat1.vrsl.net
      eip_cname: ec2-54-245-225-243.us-west-2.compute.amazonaws.com
      dns: tomcat1-play.vrsl.net
# END JINJA!

aws_ubuntu_west_2:

  - ha-play.vrsl.net:
    grains:
      roles:
        - lb
      datacenter: 
        - oregon
      environment:
        - development
      dns: ha-play.vrsl.net
      eip_cname:
        - ec2-54-245-225-145.us-west-2.compute.amazonaws.com
#add security group

  - tomcat-play.vrsl.net
    grains:
      roles:
        - api
      datacenter: 
        - oregon
      environment:
        - development
      dns:
        - tomcat-play.vrsl.net   
      eip_cname:
        - ec2-54-245-225-243.us-west-2.compute.amazonaws.com             

  - apple.vrsl.net
    grains:
      roles:
        - fileserver
      datacenter: 
        - oregon
      environment:
        - development
      dns:
        - apple.vrsl.net        